{% if current_user.is_admin %}
{% extends "base2.html" %}

{% block title %} User Details {% endblock %}


{% block left_title %}
<h2>Users Details</h2>
{% endblock %}













{% block img %}
<img class="img-fluid" src="{{url_for('static', filename='images/details.svg')}}" id="left_icon">
{% endblock %}


{% block right_centent %}
<h3>Manage Users Informations</h3>
{% endblock %}
{% block button %}
<!-- Button trigger modal -->
<button type="button" class="btn btn-lg btn-outline-success my_shadow" data-bs-toggle="modal"
    data-bs-target="#exampleModal">
    Add New User
</button>

{% endblock %}

{% block table %}
<!-------------------------------- Table Header Row -------------------------------->
<thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone No</th>
        <th>Gender</th>
        <th>DoB</th>
        <th>Nationality</th>
        <th>Role</th>
        <th>Action</th>
    </tr>
</thead>
<!-------------------------------- Table Body Rows -------------------------------->
<tbody class="text-center small">
    {% for row in users %}
    <tr>
        <td>{{row.id}}</td>
        <td>{{row.name}}</td>
        <td>{{row.email}}</td>
        <td>{{row.phone_number}}</td>
        <td>{{row.gender}}</td>
        <td>{{row.date_of_birth}}</td>
        <td>{{row.nationality}}</td>
        <td>{% if row.is_admin %} Admin {% else %} User {% endif %}</td>
        <td>
            <div class="btn-group gap-1 ">
                <a href="{{url_for('update_user', id=row.id)}}" type="button" class="btn">
                    <i class="fa-solid fa-pen-to-square fa-xl" style="color: #215fe4;"></i>
                </a>

                <form action="{{ url_for('delete_user', id=row.id) }}">
                    <button class="btn" type="submit"
                        onclick="return confirm('Are you sure you want to delete this record?')">
                        <i class="fa-solid fa-trash-can fa-xl" style="color: #e10e0e;"></i>
                    </button>
                </form>
            </div>
        </td>
    </tr>
    <!-- Update User Modal -->
    {% endfor %}
</tbody>

<!-- Add User Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Add New User</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="{{url_for('add_user')}}" method="post" id="add_user_form">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <!-- Full Name  -->
                                <div class="mb-4 form-floating">
                                    <input type="text" class="form-control" id="name" name="name"
                                        placeholder="Full Name" required>
                                    <label for="name">Full Name <span class="needed">*</span></label>
                                </div>
                            </div>
                            <div class="col">
                                <!-- Email Address  -->
                                <div class="mb-4 form-floating">
                                    <input type="email" class="form-control" id="email" name="email"
                                        placeholder="Emaill Address" required>
                                    <label for="email">Email Address <span class="needed">*</span></label>
                                </div>
                            </div>
                        </div>



                        <div class="row">
                            <div class="col">
                                <!-- Password  -->
                                <div class="mb-4 form-floating">
                                    <input type="password" class="form-control" id="password" name="password"
                                        placeholder="Password" required>
                                    <label for="password">Password <span class="needed">*</span></label>
                                </div>
                            </div>
                            <div class="col">
                                <p>Select Role of user</p>
                                <!-- Is Admin field -->
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" value="admin" id="admin" name="role">
                                    <label class="form-check-label" for="admin">Admin</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" value="user" id="user" name="role"
                                        checked>
                                    <label class="form-check-label" for="user"> User</label>
                                </div>
                            </div>

                            <div class="col">
                                <p>Select Gender of user</p>
                                <!-- Gender -->
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" value="Male" id="male" name="gender"
                                        checked>
                                    <label class="form-check-label" for="male">Male</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" value="Female" id="female"
                                        name="gender" name="gender">
                                    <label class="form-check-label" for="female">Female</label>
                                </div>
                                </di>
                            </div>
                        </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" form="add_user_form">Add User</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}


{% else %}
<!------------------- If Not Admin --------------------------->
<div>
    <h1>Wooops!!!</h1>
    <h3>Olny Admin Can See content of this Page</h3>
    <img src="../static/images/not_allowed.svg" alt="Not Allowed" height="90%" width="90%">
</div>
{% endif %}